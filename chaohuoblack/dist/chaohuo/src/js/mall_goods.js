!function(t){t(function(){function n(){d="",getAllCommunityGoodsManage(a,this.__index-1,s,function(n){console.log(n),l=n.content.totalPages,i=n.content.totalElements,t(".index-total").html("共有数据："+i+"条");for(var e=n.content.list,a=0;a<e.length;a++){var o=e[a].picture.split(",");d+="<tr>\n\t\t\t\t\t\t\t\t<td>"+e[a].userName+"</td>\n\t\t\t\t\t\t\t\t<td>"+e[a].name+'</td>\n\t\t\t\t\t\t\t\t<td><img src="'+o[0]+'"/ style="height:50px;width:auto;"></td>\n\t\t\t\t\t\t\t\t<td>'+e[a].goodsCount+"</td>\n\t\t\t\t\t\t\t\t<td>"+e[a].yMoney+'元</td>\n\t\t\t\t\t\t\t\t<td class="des">'+e[a].description+'</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<span class="index-query" dataid = '+e[a].id+">查看</span>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>"}t(".index-table-show").html(""),t(".index-table-show").append(m+d),t(".des").ellipsis(20)})}var e,a,o=(t(".user-onecheck"),document.getElementById("pager")),d="",l=0,i=0,s=10,m="<tr>\n\t\t\t\t\t\t\t\t<td>发布人</td>\n\t\t\t\t\t\t\t\t<td>商品名称</td>\n\t\t\t\t\t\t\t\t<td>商品图片</td>\n\t\t\t\t\t\t\t\t<td>库存数量</td>\n\t\t\t\t\t\t\t\t<td>价格</td>\n\t\t\t\t\t\t\t\t<td>商品介绍</td>\n\t\t\t\t\t\t\t\t<td>操作</td>\n\t\t\t\t\t\t\t</tr>";t.fn.ellipsis=function(n){return t(this).each(function(){var e=t(this),a=e.html(),o=a.length;if(n<o){var d=a.substr(0,n);e.html(d+"...")}})},t(".index-search").on("click",function(){t(".index-table-show").find("tbody").html(""),t(".pager-box").remove(),a=t(".rednumber").val(),getAllCommunityGoodsManage(a,0,10,function(e){console.log(e),l=e.content.totalPages,i=e.content.totalElements;for(var a=e.content.list,s=0;s<a.length;s++){var r=a[s].picture.split(",");d+="<tr>\n\t\t\t\t\t\t\t\t<td>"+a[s].userName+"</td>\n\t\t\t\t\t\t\t\t<td>"+a[s].name+'</td>\n\t\t\t\t\t\t\t\t<td><img src="'+r[0]+'"/></td>\n\t\t\t\t\t\t\t\t<td>'+a[s].goodsCount+"</td>\n\t\t\t\t\t\t\t\t<td>"+a[s].yMoney+"元</td>\n\t\t\t\t\t\t\t\t<td>"+a[s].description+'</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<span class="index-query" dataid = '+a[s].id+">查看</span>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>"}t(".index-table-show").html(""),t(".index-table-show").append(m+""),t(".index-total").html("共有数据："+i+"条");new Pager({index:1,total:l,parent:o,onchange:n})})}),getAllCommunityGoodsManage(a,0,10,function(t){l=t.content.totalPages});var r=(new Pager({index:1,total:l,parent:o,onchange:n}),"");t(document).on("click",".index-query",function(){r="",t(".mallimg").html(""),t(".manage-banner-show").hide(),t(".mall-detail").show();var n=t(this).attr("dataid");getOneCommunityGoodsManage(n,function(n){if(console.log(n),1==n.code){var a=n.content,o=n.content.picture.split(",");switch(a.status){case 0:e="下架";break;case 1:e="上架"}t(".mallpeople").html(a.userName),t(".mallname").html(a.name),t(".mallnum").html(a.goodsCount),t(".mallprice").html(a.yMoney+"元"),t(".mall-goodsdetail").html(a.description),t(".malltime").html(formatDate(new Date(a.createTime))),t(".mallstatus").html(e);for(var d=0;d<o.length;d++)r+='<img src="'+o[d]+'" style="height:150px;width:auto;margin-right:15px;"/>';t(".mallimg").append(r)}else alert(n.msg)})}),t(document).on("click",".index-btn-cel",function(){t(".manage-banner-show").show(),t(".mall-detail").hide()})})}(jQuery);