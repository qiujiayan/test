!function(t){t(function(){function n(){g="",checkBanner(this.__index-1,s,10,c,function(n){for(var e=n.content.list,a=0;a<e.length;a++){switch(e[a].status){case 1:h="上线",u='<i class="menu-icon fa fa-long-arrow-up"></i>\n\t\t\t\t\t\t\t\t\t<i class="menu-icon fa fa-long-arrow-down"></i>';break;case 2:h="已下线",u=""}g+='<tr>\n\t\t\t\t\t\t\t\t<td><input type="checkbox"  class="user-onecheck"/></td>\n\t\t\t\t\t\t\t\t<td class="banner-id">'+e[a].id+"</td>\n\t\t\t\t\t\t\t\t<td>"+e[a].type+'</td>\n\t\t\t\t\t\t\t\t<td><img src="'+e[a].sourceUrl+'" height="30" width="60"/></td>\n\t\t\t\t\t\t\t\t<td class="banner-url">'+e[a].linkUrl+'</td>\n\t\t\t\t\t\t\t\t<td class="banner-time">'+formatDate(new Date(e[a].createTime))+'</td>\n\t\t\t\t\t\t\t\t<td class="banner-status" statusid='+e[a].status+">"+h+"</td>\n\t\t\t\t\t\t\t\t<td dataid = "+e[a].id+">"+u+'</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<span class="index-editor" dataid = '+e[a].id+'>编辑</span>\n\t\t\t\t\t\t\t\t\t<span class="index-query" dataid = '+e[a].id+">查看</span>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>"}t(".index-table-show").html(""),t(".index-table-show").append(k+g)});var n=t(".user-onecheck");t(".user-allcheck").on("click",function(){for(var e=0;e<n.length;e++)t(this).is(":checked")?n[e].checked=!0:n[e].checked=!1})}function e(n){var e=t(n).parent().parent();console.log(e),e.prev().insertAfter(e)}function a(n){var e=t(n).parent().parent();e.next().insertBefore(e)}var i,o,c,s,d,r,l,h,u,m=t(".user-onecheck"),f=document.getElementById("pager"),g="",p=0,b=0,k='<tr>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<input type="checkbox" class="user-allcheck"/>全选\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>ID</td>\n\t\t\t\t\t\t\t\t<td>banner类别</td>\n\t\t\t\t\t\t\t\t<td>URL</td>\n\t\t\t\t\t\t\t\t<td>跳转链接</td>\n\t\t\t\t\t\t\t\t<td>创建时间</td>\n\t\t\t\t\t\t\t\t<td>状态</td>\n\t\t\t\t\t\t\t\t<td>调整</td>\n\t\t\t\t\t\t\t\t<td>操作</td>\n\t\t\t\t\t\t\t</tr>';t(document).on("click",".banner-add-main",function(){t(".manage-banner-show").css("display","none"),t(".manage-banner-edi").css("display","block")}),checkBanner(0,"",10,"",function(t){p=t.content.totalPages,b=t.content.totalElements}),t(".index-total").html("共有数据："+b+"条"),t(".user-allcheck").on("click",function(){for(var n=0;n<m.length;n++)t(this).is(":checked")?m[n].checked=!0:m[n].checked=!1}),t(".user-table-del").on("click",function(){var n=t(this);t(".delete-wrap").show(),t(".delete-confirm").click(function(){n.parent().parent().remove(),t(".delete-wrap").hide()}),t(".delete-cancel").click(function(){t(".delete-wrap").hide()})}),t(".manage-upa-file").on("change",function(n){l=this.files,upLoad(t.cookie("tokenid"),l[0].name,"B",function(t){oSign=t.content.oneEffectiveSign,oSigns=t.content.periodEffectiveSign,oPath=t.content.cosPath,imgJSSDK(oSigns,oSign,oPath,l[0],function(t){r=t})});var e=new FileReader;e.readAsDataURL(l[0]),e.onload=function(n){if(n.total/1024/1024>=2)return void alert("文件大小大于2M");t(".banner-img").attr("src",this.result)}}),t("#pid").change(function(){0==(s=t(this).find("option:selected").val())&&(t(".hand-type-div").show(),s=t(".hand-type-div .hand-type").val())}),t(".banner-add").on("click",function(){i=t(".banner-link").val(),o=t("select[name='bannershow']").val(),r=r,c=t("select[name='bannerstatus']").val(),s=t("select[name='bannertype']").val(),0==s&&(t(".hand-type-div").show(),s=t(".hand-type-div .hand-type").val()),console.log(s),addBanner(i,o,r,c,s,function(t){1==t.code?(alert("上传成功"),location.reload()):alert(t.msg)})}),t(".index-table-show").on("click",".index-editor",function(){d=t(this).attr("dataid"),t(".manage-banner-bian .banner-img").attr("src",t(this).parent().parent().find("img").attr("src")),t(".modify-bannerlink").val(t(this).parent().parent().find(".banner-url").html()),t(".manage-banner-show").css("display","none"),t(".manage-banner-bian").css("display","block")}),t(".index-table-show").on("click",".index-query",function(){console.log(1),d=t(this).attr("dataid"),t(".manage-banner-detail .banner-img").attr("src",t(this).parent().parent().find("img").attr("src")),t(".bannerdetail-url").html(t(this).parent().parent().find(".banner-url").html()),t(".bannerdetail-time").html(t(this).parent().parent().find(".banner-time").html()),t(".bannerdetail-status").html(t(this).parent().parent().find(".banner-status").html()),t(".manage-banner-show").css("display","none"),t(".manage-banner-detail").css("display","block")}),t(".manage-banner-detail").on("click",".bannerdetail-cel",function(){console.log(t(this)),t(".manage-banner-detail").css("display","none"),t(".manage-banner-show").css("display","block")}),t(".manage-banner-detail").on("click",".bannerdetail-con",function(){t(".manage-banner-bian .banner-img").attr("src",t(this).parent().parent().find("img").attr("src")),t(".modify-bannerlink").val(t(".bannerdetail-url").html()),console.log(t(this)),t(".manage-banner-detail").css("display","none"),t(".manage-banner-bian").css("display","block")}),t(".banner-modify-cel").on("click",function(){t(".manage-banner-bian").css("display","none"),t(".manage-banner-show").css("display","block")}),t(".banner-upa-file").on("change",function(n){l=this.files,upLoad(t.cookie("tokenid"),l[0].name,"B",function(t){oSign=t.content.oneEffectiveSign,oSigns=t.content.periodEffectiveSign,oPath=t.content.cosPath,imgJSSDK(oSigns,oSign,oPath,l[0],function(t){r=t})});var e=new FileReader;e.readAsDataURL(l[0]),e.onload=function(n){if(n.total/1024/1024>=2)return void alert("文件大小大于2M");t(".banner-img").attr("src",this.result)}}),t(".banner-modify-que").on("click",function(){i=t(".modify-bannerlink").val(),o=t("select[name='modify-show']").val(),r=r,c=t("select[name='mpdify-status']").val(),console.log(i+","+o+","+c+","+s),modifyBanner(d,i,o,r,c,function(t){console.log(t),1==t.code?(alert("修改成功"),location.reload()):alert(t.msg)})}),t(".banner-search").on("click",function(){var e="";t(".index-table-show").find("tbody").html(""),t(".pager-box").remove(),s=t("select[name='search-type']").val(),c=t("select[name='search-status']").val(),console.log(s+","+c),checkBanner(0,s,10,c,function(a){console.log(a),p=a.content.totalPages,b=a.content.totalElements;for(var i=a.content.list,o=0;o<i.length;o++){switch(i[o].status){case 1:h="上线",u='<i class="menu-icon fa fa-long-arrow-up"></i>\n\t\t\t\t\t\t\t\t\t<i class="menu-icon fa fa-long-arrow-down"></i>';break;case 2:h="已下线",u=""}e+='<tr>\n\t\t\t\t\t\t\t\t<td><input type="checkbox"  class="user-onecheck"/></td>\n\t\t\t\t\t\t\t\t<td class="banner-id">'+i[o].id+"</td>\n\t\t\t\t\t\t\t\t<td>"+i[o].type+'</td>\n\t\t\t\t\t\t\t\t<td><img src="'+i[o].sourceUrl+'" height="30" width="60"/></td>\n\t\t\t\t\t\t\t\t<td class="banner-url">'+i[o].linkUrl+"</td>\n\t\t\t\t\t\t\t\t<td>"+formatDate(new Date(i[o].createTime))+'</td>\n\t\t\t\t\t\t\t\t<td class="banner-status" statusid='+i[o].status+">"+h+"</td>\n\t\t\t\t\t\t\t\t<td dataid = "+i[o].id+">"+u+'</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<span class="index-editor" dataid = '+i[o].id+'>编辑</span>\n\t\t\t\t\t\t\t\t\t<span class="index-query" dataid = '+i[o].id+">查看</span>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>"}t(".index-table-show").html(""),t(".index-table-show").append(k+e),t(".index-total").html("共有数据："+b+"条");new Pager({index:1,total:p,parent:f,onchange:n})}),console.log(p)});new Pager({index:1,total:p,parent:f,onchange:n});t(document).on("click",".fa-long-arrow-up",function(){var n=t(this),a=n.parent().attr("dataid");modifyBannerSort(a,1,s,function(t){console.log(t),1==t.code?e(n):alert(t.msg)})}),t(document).on("click",".fa-long-arrow-down",function(){var n=t(this),e=n.parent().attr("dataid");modifyBannerSort(e,0,s,function(t){console.log(t),1==t.code?a(n):alert(t.msg)})}),t(document).on("click",".index-btn-cel",function(){t(".manage-banner-edi").css("display","none"),t(".manage-banner-show").css("display","block")})})}(jQuery);