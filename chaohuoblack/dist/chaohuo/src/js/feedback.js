!function(t){t(function(){function e(){m="",void 0==this.__index&&(this.__index=1),getAllFeedBack(n,this.__index-1,f,function(e){if(console.log(e),1==e.code){for(var n=e.content.list,c=0;c<n.length;c++){switch(n[c].status){case 0:a="未处理";break;case 1:a="已经处理";break;case null:a="未处理"}switch(n[c].dealUserId){case null:d="",i='<span class="index-editor" dataid = '+n[c].id+" imgid= "+n[c].imgs+">处理</span>";break;default:d=n[c].dealUserId,i='<span class="index-editor" dataid = '+n[c].id+" imgid= "+n[c].imgs+">已处理</span>"}switch(n[c].dealDesc){case null:s="";break;default:s=n[c].dealDesc}switch(n[c].contact){case null:l="";break;default:l=n[c].contact}m+='<tr dataid="'+n[c].id+'">\n\t\t\t\t\t\t\t\t\t\t<td>'+n[c].userId+'</td>\n\t\t\t\t\t\t\t\t\t\t<td class="userPhone">'+l+'</td>\n\t\t\t\t\t\t\t\t\t\t<td class="userTime">'+formatDate(new Date(n[c].createTime))+'</td>\n\t\t\t\t\t\t\t\t\t\t<td class="userDes">'+n[c].des+'</td>\n\t\t\t\t\t\t\t\t\t\t<td class="userStatus">'+a+'</td>\n\t\t\t\t\t\t\t\t\t\t<td class="dealUser">'+d+'</td>\n\t\t\t\t\t\t\t\t\t\t<td class="dealTime">'+formatDate(new Date(n[c].dealTime))+'</td>\n\t\t\t\t\t\t\t\t\t\t<td class="dealDes">'+s+"</td>\n\t\t\t\t\t\t\t\t\t\t<td>"+i+"</td>\n\t\t\t\t\t\t\t\t\t</tr>"}t(".index-table").html(""),t(".index-table").append(u+m)}else alert("反馈信息"+e.msg)})}var n,a,d,s,l,i,c,o,r,h=document.getElementById("pager"),u="<tr>\n\t\t\t\t\t\t<td>用户ID</td>\n\t\t\t\t\t\t<td>联系方式</td>\n\t\t\t\t\t\t<td>创建时间</td>\n\t\t\t\t\t\t<td>用户反馈</td>\n\t\t\t\t\t\t<td>状态</td>\n\t\t\t\t\t\t<td>处理人</td>\n\t\t\t\t\t\t<td>处理时间</td>\n\t\t\t\t\t\t<td>处理意见</td>\n\t\t\t\t\t\t<td>操作</td>\n\t\t\t\t\t</tr>",m="",g=0,p=0,f=10,k="";getAllFeedBack(n,1,f,function(e){g=e.content.totalPages,p=e.content.totalElements,t(".index-total").html("共有数据:"+p+"条")});new Pager({index:1,total:g,parent:h,onchange:e});t(document).on("click",".user-search",function(){n=t("select[name='feedbackStatus']").val(),t(".pager-box").remove(),getAllFeedBack(n,1,f,function(n){if(console.log(n),1==n.code){console.log(1),g=n.content.totalPages,p=n.content.totalElements,t(".index-total").html("共有数据:"+p+"条"),m="";for(var c=n.content.list,o=0;o<c.length;o++){switch(c[o].status){case 0:a="未处理";break;case 1:a="已经处理";break;case null:a="未处理"}switch(c[o].dealUserId){case null:d="",i='<span class="index-editor" dataid = '+c[o].id+" imgid= "+c[o].imgs+">待处理</span>";break;default:d=c[o].dealUserId,i='<span class="index-editor" dataid = '+c[o].id+" imgid= "+c[o].imgs+">详情</span>"}switch(c[o].dealDesc){case null:s="";break;default:s=c[o].dealDesc}switch(c[o].contact){case null:l="";break;default:l=c[o].contact}m+='<tr dataid="'+c[o].id+'">\n\t\t\t\t\t\t\t\t\t\t<td>'+c[o].userId+'</td>\n\t\t\t\t\t\t\t\t\t\t<td class="userPhone">'+l+'</td>\n\t\t\t\t\t\t\t\t\t\t<td class="userTime">'+formatDate(new Date(c[o].createTime))+'</td>\n\t\t\t\t\t\t\t\t\t\t<td class="userDes">'+c[o].des+'</td>\n\t\t\t\t\t\t\t\t\t\t<td class="userStatus">'+a+'</td>\n\t\t\t\t\t\t\t\t\t\t<td class="dealUser">'+d+'</td>\n\t\t\t\t\t\t\t\t\t\t<td class="dealTime">'+formatDate(new Date(c[o].dealTime))+'</td>\n\t\t\t\t\t\t\t\t\t\t<td class="dealDes">'+s+"</td>\n\t\t\t\t\t\t\t\t\t\t<td>"+i+"</td>\n\t\t\t\t\t\t\t\t\t</tr>"}t(".index-table").html(""),t(".index-table").append(u+m);new Pager({index:1,total:g,parent:h,onchange:e})}else alert("错误信息"+n.msg)})}),t(document).on("click",".index-editor",function(){var e=t(this);c=t(this).attr("dataid"),o=t(this).attr("imgid");var n=e.parent().parent().find(".dealUser").html();t(".main-content-inner").load("src/html/feedback_detail.html .through-detail",function(){o=o.split(","),console.log(o),""!=n&&(t(".index-btn-con").css("display","none"),t(".index-btn-cel").css("marginLeft","40%"));for(var a=0;a<o.length;a++)k+='<img src="'+o[a]+'"/>';t(".detail-img").append('<span class="index-name">图片：</span>'+k),t(".real-name .through-span").html(e.parent().parent().find(".userPhone").html()),t(".through-time .through-span").html(e.parent().parent().find(".userTime").html()),t(".through-feedback .through-span").html(e.parent().parent().find(".userDes").html()),t(".through-status .through-span").html(e.parent().parent().find(".userStatus").html()),t(".through-people .through-span").html(n),t(".through-dealtime .through-span").html(e.parent().parent().find(".dealTime").html()),t(".through-dealidea .through-span").html(e.parent().parent().find(".dealDes").html())})}),t(document).on("click",".index-btn-cel",function(){location.reload()}),t(document).on("click",".index-btn-con",function(){t(".nothrough-wrap").show()}),t(document).on("click",".nothrough-cancel",function(){t(".nothrough-wrap").hide()}),t(document).on("click",".nothrough-confirm",function(){r=t(".dealIdea").val(),id=c,dealFeedBack(id,r,function(t){console.log(t),1==t.code?(alert("处理成功"),location.reload()):alert("处理反馈错误信息"+t.msg)})})})}(jQuery);